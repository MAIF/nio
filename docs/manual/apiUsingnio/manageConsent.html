<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>Manage Consents · Nio</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content='nio-manual'/>
<link href="https://fonts.googleapis.com/css?family=Roboto:100normal,100italic,300normal,300italic,400normal,400italic,500normal,500italic,700normal,700italic,900normal,900italicc" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../js/page.js"></script>
<script type="text/javascript" src="../js/groups.js"></script>
<link rel="stylesheet" type="text/css" href="../lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="../lib/foundation/dist/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="../css/page.css"/>

<!--
<link rel="shortcut icon" href="../images/favicon.ico" />
-->
</head>

<body>
<div class="off-canvas-wrapper">
<div class="off-canvas-wrapper-inner" data-off-canvas-wrapper>

<div class="off-canvas position-left" id="off-canvas-menu" data-off-canvas>
<nav class="off-canvas-nav">
<div class="nav-home">
<a href="../index.html" >
<span class="home-icon">⌂</span>Nio
</a>
<div class="version-number">
2.0.4
</div>
</div>
<div class="nav-toc">
<ul>
  <li><a href="../about.html" class="page">About Nio</a></li>
  <li><a href="../architecture.html" class="page">Architecture</a></li>
  <li><a href="../features.html" class="page">Features</a></li>
  <li><a href="../getnio/index.html" class="page">Get Nio</a>
  <ul>
    <li><a href="../getnio/fromsources.html" class="page">From sources</a></li>
    <li><a href="../getnio/frombinaries.html" class="page">From binaries</a></li>
    <li><a href="../getnio/fromdocker.html" class="page">From Docker</a></li>
  </ul></li>
  <li><a href="../firstrun/index.html" class="page">First run</a>
  <ul>
    <li><a href="../firstrun/configWithEnv.html" class="page">Config. with ENVs</a></li>
    <li><a href="../firstrun/runNio.html" class="page">Run Nio</a></li>
    <li><a href="../firstrun/dockerRunNio.html" class="page">Run Nio with Docker</a></li>
  </ul></li>
  <li><a href="../uiUsingnio/index.html" class="page">UI : Using Nio</a>
  <ul>
    <li><a href="../uiUsingnio/uiManageOrganisations.html" class="page">Manage Organisations</a></li>
    <li><a href="../uiUsingnio/uiManageConsents.html" class="page">Manage Consents</a></li>
    <li><a href="../uiUsingnio/uiManageUsers.html" class="page">Manage Users</a></li>
  </ul></li>
  <li><a href="../apiUsingnio/index.html" class="page">API : Using Nio</a>
  <ul>
    <li><a href="../apiUsingnio/manageTenant.html" class="page">Manage Tenant</a></li>
    <li><a href="../apiUsingnio/manageOrganisation.html" class="page">Manage Organisation</a></li>
    <li><a href="../apiUsingnio/manageOffer.html" class="page">Manage Offer</a></li>
    <li><a href="../apiUsingnio/manageConsent.html" class="active page">Manage Consents</a></li>
    <li><a href="../apiUsingnio/manageExtraction.html" class="page">Manage Data extraction</a></li>
  </ul></li>
  <li><a href="../kafkaEvents.html" class="page">Published Kafka Events</a></li>
  <li><a href="../quickstart/index.html" class="page">QuickStart</a>
  <ul>
    <li><a href="../quickstart/tenant.html" class="page">Manage tenants</a></li>
    <li><a href="../quickstart/organisation.html" class="page">Manage organisations and consents</a></li>
    <li><a href="../quickstart/users.html" class="page">manage <del>users</del> consents</a></li>
  </ul></li>
</ul>
</div>

</nav>
</div>

<div class="off-canvas-content" data-off-canvas-content>

<header class="site-header expanded row">
<div class="small-12 column">
<a href="#" class="off-canvas-toggle hide-for-medium" data-toggle="off-canvas-menu"><svg class="svg-icon svg-icon-menu" version="1.1" id="Menu" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"> <path class="svg-icon-menu-path" fill="#53CDEC" d="M16.4,9H3.6C3.048,9,3,9.447,3,10c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,9.447,16.952,9,16.4,9z M16.4,13
H3.6C3.048,13,3,13.447,3,14c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,13.447,16.952,13,16.4,13z M3.6,7H16.4
C16.952,7,17,6.553,17,6c0-0.553-0.048-1-0.6-1H3.6C3.048,5,3,5.447,3,6C3,6.553,3.048,7,3.6,7z"/></svg>
</a>
<div class="title-wrapper">
<div class="title-logo"></div>
<div class="title"><a href="../index.html">Nio</a></div>
</div>
<!--
<a href="https://www.example.com" class="logo show-for-medium">logo</a>
-->
</div>
</header>

<div class="expanded row">

<div class="medium-3 large-2 show-for-medium column">
<nav class="site-nav">
<div class="nav-home">
<a href="../index.html" >
<span class="home-icon">⌂</span>Nio
</a>
<div class="version-number">
2.0.4
</div>
</div>
<div class="nav-toc">
<ul>
  <li><a href="../about.html" class="page">About Nio</a></li>
  <li><a href="../architecture.html" class="page">Architecture</a></li>
  <li><a href="../features.html" class="page">Features</a></li>
  <li><a href="../getnio/index.html" class="page">Get Nio</a>
  <ul>
    <li><a href="../getnio/fromsources.html" class="page">From sources</a></li>
    <li><a href="../getnio/frombinaries.html" class="page">From binaries</a></li>
    <li><a href="../getnio/fromdocker.html" class="page">From Docker</a></li>
  </ul></li>
  <li><a href="../firstrun/index.html" class="page">First run</a>
  <ul>
    <li><a href="../firstrun/configWithEnv.html" class="page">Config. with ENVs</a></li>
    <li><a href="../firstrun/runNio.html" class="page">Run Nio</a></li>
    <li><a href="../firstrun/dockerRunNio.html" class="page">Run Nio with Docker</a></li>
  </ul></li>
  <li><a href="../uiUsingnio/index.html" class="page">UI : Using Nio</a>
  <ul>
    <li><a href="../uiUsingnio/uiManageOrganisations.html" class="page">Manage Organisations</a></li>
    <li><a href="../uiUsingnio/uiManageConsents.html" class="page">Manage Consents</a></li>
    <li><a href="../uiUsingnio/uiManageUsers.html" class="page">Manage Users</a></li>
  </ul></li>
  <li><a href="../apiUsingnio/index.html" class="page">API : Using Nio</a>
  <ul>
    <li><a href="../apiUsingnio/manageTenant.html" class="page">Manage Tenant</a></li>
    <li><a href="../apiUsingnio/manageOrganisation.html" class="page">Manage Organisation</a></li>
    <li><a href="../apiUsingnio/manageOffer.html" class="page">Manage Offer</a></li>
    <li><a href="../apiUsingnio/manageConsent.html" class="active page">Manage Consents</a></li>
    <li><a href="../apiUsingnio/manageExtraction.html" class="page">Manage Data extraction</a></li>
  </ul></li>
  <li><a href="../kafkaEvents.html" class="page">Published Kafka Events</a></li>
  <li><a href="../quickstart/index.html" class="page">QuickStart</a>
  <ul>
    <li><a href="../quickstart/tenant.html" class="page">Manage tenants</a></li>
    <li><a href="../quickstart/organisation.html" class="page">Manage organisations and consents</a></li>
    <li><a href="../quickstart/users.html" class="page">manage <del>users</del> consents</a></li>
  </ul></li>
</ul>
</div>

</nav>
</div>

<div class="small-12 medium-9 large-10 column">
<section class="site-content">

<div class="page-header row">
<div class="medium-12 show-for-medium column">
<div class="nav-breadcrumbs">
<ul>
  <li><a href="../index.html">Nio</a></li>
  <li><a href="../apiUsingnio/index.html">API : Using Nio</a></li>
  <li>Manage Consents</li>
</ul>
</div>
</div>
</div>

<div class="page-content row">
<div class="small-12 large-9 column" id="docs">
<h1><a href="#manage-consents" name="manage-consents" class="anchor"><span class="anchor-link"></span></a>Manage Consents</h1>
<p>Once the <em>Organisation</em> and <em>permissions</em> managed. The user will be able to manage these consents and modify them. The management of the consents is done by the acceptance or the refusal of the permissions requested by the organisation. For a new user, you can retrieve the latest published version of the permissions of the organisation.</p>
<h2><a href="#data-model" name="data-model" class="anchor"><span class="anchor-link"></span></a>Data model</h2>
<pre class="prettyprint"><code class="language-json">{
  &quot;userId&quot;: &quot;string&quot;,
  &quot;orgKey&quot;: &quot;string&quot;,
  &quot;lastUpdate&quot;: &quot;string&quot;,
  &quot;metaData&quot;: [
    {
      &quot;userId&quot;: &quot;string&quot;,
      &quot;orgKey&quot;: &quot;string&quot;
    }
  ],
  &quot;doneBy&quot;: {
    &quot;userId&quot;: &quot;string&quot;,
    &quot;role&quot;: &quot;string&quot;
  },
  &quot;version&quot;: 0,
  &quot;groups&quot;: [
    {
      &quot;key&quot;: &quot;string&quot;,
      &quot;label&quot;: &quot;string&quot;,
      &quot;consents&quot;: [
        {
          &quot;key&quot;: &quot;string&quot;,
          &quot;label&quot;: &quot;string&quot;,
          &quot;checked&quot;: true
        }
      ]
    }
  ],
  &quot;offers&quot;: [
    {
      &quot;key&quot;: &quot;string&quot;,
      &quot;label&quot;: &quot;string&quot;,
      &quot;version&quot;: 0,
      &quot;groups&quot;: [
        {
          &quot;key&quot;: &quot;string&quot;,
          &quot;label&quot;: &quot;string&quot;,
          &quot;consents&quot;: [
            {
              &quot;key&quot;: &quot;string&quot;,
              &quot;label&quot;: &quot;string&quot;,
              &quot;checked&quot;: true
            }
          ]
        }
      ]
    }
  ]
}
</code></pre>
<h2><a href="#api" name="api" class="anchor"><span class="anchor-link"></span></a>API</h2>
<p><strong>Get consent fact template</strong></p>
<pre class="prettyprint"><code class="language-sh">curl --include -X GET http://localhost:9000/api/demo/organisations/newOrga/users/_template \
    -H &#39;Content-Type: application/json&#39; \
    -H &#39;Accept: application/json&#39; \
    -H &#39;Nio-Client-Id: xxx&#39; \
    -H &#39;Nio-Client-Secret: xxx&#39;
</code></pre>
<p>Will respond with a 200 status code : </p>
<pre class="prettyprint"><code class="language-json">{
  &quot;userId&quot;: &quot;fill&quot;,
  &quot;doneBy&quot;: {
    &quot;userId&quot;: &quot;fill&quot;,
    &quot;role&quot;: &quot;fill&quot;
  },
  &quot;version&quot;: 1,
  &quot;groups&quot;: [
    {
      &quot;key&quot;: &quot;grp1&quot;,
      &quot;label&quot;: &quot;J&#39;accepte de recevoir les offres personnalisées&quot;,
      &quot;consents&quot;: [
        {
          &quot;key&quot;: &quot;phone&quot;,
          &quot;label&quot;: &quot;Par téléphone&quot;,
          &quot;checked&quot;: false
        },
        {
          &quot;key&quot;: &quot;email&quot;,
          &quot;label&quot;: &quot;Par e-mail&quot;,
          &quot;checked&quot;: false
        }
      ]
    },
    {
      &quot;key&quot;: &quot;grp2&quot;,
      &quot;label&quot;: &quot;J&#39;accepte de recevoir les offres personnalisées des partenaires&quot;,
      &quot;consents&quot;: [
        {
          &quot;key&quot;: &quot;phone&quot;,
          &quot;label&quot;: &quot;Par téléphone&quot;,
          &quot;checked&quot;: false
        }
      ]
    }
  ],
  &quot;lastUpdate&quot;: &quot;2018-11-23T11:12:12Z&quot;,
  &quot;orgKey&quot;: &quot;newOrga&quot;
}
</code></pre>
<p><strong>Note</strong> : You can specify a <em>userId</em> query param to build a template based on the last publish of a given organisation and consent fact validated by the given user. It can be very useful if a new version of an organisation has been publish and you want to propose to your user the new version of consent fact pre-filled with the actual consent fact of your user. </p>
<p><strong>Create consent fact for a given user</strong></p>
<pre class="prettyprint"><code class="language-sh">curl --include -X PUT http://localhost:9000/api/demo/organisations/newOrga/users/user1 \
    -H &#39;Content-Type: application/json&#39; \
    -H &#39;Accept: application/json&#39; \
    -H &#39;Nio-Client-Id: xxx&#39; \
    -H &#39;Nio-Client-Secret: xxx&#39; \
-d &#39;{
  &quot;userId&quot;: &quot;user1&quot;,
  &quot;doneBy&quot;: {
    &quot;userId&quot;: &quot;user1&quot;,
    &quot;role&quot;: &quot;user&quot;
  },
  &quot;version&quot;: 1,
  &quot;groups&quot;: [
    {
      &quot;key&quot;: &quot;grp1&quot;,
      &quot;label&quot;: &quot;J&#39;\&#39;&#39;accepte de recevoir les offres personnalisées&quot;,
      &quot;consents&quot;: [
        {
          &quot;key&quot;: &quot;phone&quot;,
          &quot;label&quot;: &quot;Par téléphone&quot;,
          &quot;checked&quot;: false
        },
        {
          &quot;key&quot;: &quot;email&quot;,
          &quot;label&quot;: &quot;Par e-mail&quot;,
          &quot;checked&quot;: false
        }
      ]
    },
    {
      &quot;key&quot;: &quot;grp2&quot;,
      &quot;label&quot;: &quot;J&#39;\&#39;&#39;accepte de recevoir les offres personnalisées des partenaires&quot;,
      &quot;consents&quot;: [
        {
          &quot;key&quot;: &quot;phone&quot;,
          &quot;label&quot;: &quot;Par téléphone&quot;,
          &quot;checked&quot;: false
        }
      ]
    }
  ],
  &quot;lastUpdate&quot;: &quot;2018-11-23T10:16:05Z&quot;,
  &quot;orgKey&quot;: &quot;newOrga&quot;
}&#39;
</code></pre>
<p>Will respond with a 200 status code : </p>
<pre class="prettyprint"><code class="language-json">{
  &quot;userId&quot;: &quot;user1&quot;,
  &quot;doneBy&quot;: {
    &quot;userId&quot;: &quot;user1&quot;,
    &quot;role&quot;: &quot;user&quot;
  },
  &quot;version&quot;: 1,
  &quot;groups&quot;: [
    {
      &quot;key&quot;: &quot;grp1&quot;,
      &quot;label&quot;: &quot;J&#39;accepte de recevoir les offres personnalisées&quot;,
      &quot;consents&quot;: [
        {
          &quot;key&quot;: &quot;phone&quot;,
          &quot;label&quot;: &quot;Par téléphone&quot;,
          &quot;checked&quot;: false
        },
        {
          &quot;key&quot;: &quot;email&quot;,
          &quot;label&quot;: &quot;Par e-mail&quot;,
          &quot;checked&quot;: false
        }
      ]
    },
    {
      &quot;key&quot;: &quot;grp2&quot;,
      &quot;label&quot;: &quot;J&#39;accepte de recevoir les offres personnalisées des partenaires&quot;,
      &quot;consents&quot;: [
        {
          &quot;key&quot;: &quot;phone&quot;,
          &quot;label&quot;: &quot;Par téléphone&quot;,
          &quot;checked&quot;: false
        }
      ]
    }
  ],
  &quot;lastUpdate&quot;: &quot;2018-11-23T10:16:05Z&quot;,
  &quot;orgKey&quot;: &quot;newOrga&quot;
}
</code></pre>
<p><strong>Get user consent fact</strong></p>
<pre class="prettyprint"><code class="language-sh ">curl --include -X GET http://localhost:9000/api/demo/organisations/newOrga/users/user1 \
    -H &#39;Content-Type: application/json&#39; \
    -H &#39;Accept: application/json&#39; \
    -H &#39;Nio-Client-Id: xxx&#39; \
    -H &#39;Nio-Client-Secret: xxx&#39;
</code></pre>
<p>Will respond with a 200 status code : </p>
<pre class="prettyprint"><code class="language-json">{
  &quot;userId&quot;: &quot;user1&quot;,
  &quot;doneBy&quot;: {
    &quot;userId&quot;: &quot;user1&quot;,
    &quot;role&quot;: &quot;user&quot;
  },
  &quot;version&quot;: 1,
  &quot;groups&quot;: [
    {
      &quot;key&quot;: &quot;grp1&quot;,
      &quot;label&quot;: &quot;J&#39;accepte de recevoir les offres personnalisées&quot;,
      &quot;consents&quot;: [
        {
          &quot;key&quot;: &quot;phone&quot;,
          &quot;label&quot;: &quot;Par téléphone&quot;,
          &quot;checked&quot;: false
        },
        {
          &quot;key&quot;: &quot;email&quot;,
          &quot;label&quot;: &quot;Par e-mail&quot;,
          &quot;checked&quot;: false
        }
      ]
    },
    {
      &quot;key&quot;: &quot;grp2&quot;,
      &quot;label&quot;: &quot;J&#39;accepte de recevoir les offres personnalisées des partenaires&quot;,
      &quot;consents&quot;: [
        {
          &quot;key&quot;: &quot;phone&quot;,
          &quot;label&quot;: &quot;Par téléphone&quot;,
          &quot;checked&quot;: false
        }
      ]
    }
  ],
  &quot;lastUpdate&quot;: &quot;2018-11-23T10:16:05Z&quot;,
  &quot;orgKey&quot;: &quot;newOrga&quot;
}
</code></pre>
<p><strong>Note</strong> : If you got a 404 status code, don&rsquo;t panic! Your user doesn&rsquo;t exist on Nio application but you can get a consent fact template based on organisation groups and permissions.</p>
<div class="nav-next">
<p><strong>Next:</strong> <a href="../apiUsingnio/manageExtraction.html">Manage Data extraction</a></p>
</div>
</div>
<div class="large-3 show-for-large column" data-sticky-container>
<nav class="sidebar sticky" data-sticky data-anchor="docs" data-sticky-on="large">
<div class="page-nav">
<div class="nav-title">On this page:</div>
<div class="nav-toc">
<ul>
  <li><a href="../apiUsingnio/manageConsent.html#manage-consents" class="header">Manage Consents</a>
  <ul>
    <li><a href="../apiUsingnio/manageConsent.html#data-model" class="header">Data model</a></li>
    <li><a href="../apiUsingnio/manageConsent.html#api" class="header">API</a></li>
  </ul></li>
</ul>
</div>
</div>
</nav>
</div>
</div>

</section>
</div>

</div>

<footer class="site-footer">

<section class="site-footer-nav">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 medium-4 large-3 text-center column">
<div class="nav-links">
<ul>
<!-- <li><a href="https://www.example.com/products/">Products</a> -->
</ul>
</div>
</div>

</div>
</div>
</div>
</section>

<section class="site-footer-base">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 text-center large-9 column">

<!--
<div class="copyright">
<span class="text">&copy; 2019</span>
<a href="https://www.example.com" class="logo">logo</a>
</div>
-->
</div>

</div>
</div>
</div>
</section>
</footer>

</div>
</div>
</div>
</body>

<script type="text/javascript" src="../lib/foundation/dist/foundation.min.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="../js/magellan.js"></script>

<style type="text/css">@import "../lib/prettify/prettify.css";</style>
<script type="text/javascript" src="../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">jQuery(function(){window.prettyPrint && prettyPrint()});</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-112498312-1"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'UA-112498312-1');
</script>
</html>




