<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>API · Nio</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content='nio-manual'/>
<link href="https://fonts.googleapis.com/css?family=Roboto:100normal,100italic,300normal,300italic,400normal,400italic,500normal,500italic,700normal,700italic,900normal,900italicc" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="js/page.js"></script>
<script type="text/javascript" src="js/groups.js"></script>
<link rel="stylesheet" type="text/css" href="lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="lib/foundation/dist/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="css/page.css"/>

<!--
<link rel="shortcut icon" href="images/favicon.ico" />
-->
</head>

<body>
<div class="off-canvas-wrapper">
<div class="off-canvas-wrapper-inner" data-off-canvas-wrapper>

<div class="off-canvas position-left" id="off-canvas-menu" data-off-canvas>
<nav class="off-canvas-nav">
<div class="nav-home">
<a href="index.html" >
<span class="home-icon">⌂</span>Nio
</a>
<div class="version-number">
0.1.0
</div>
</div>
<div class="nav-toc">
<ul>
  <li><a href="about.html" class="page">About Nio</a></li>
  <li><a href="archi.html" class="page">Architecture</a></li>
  <li><a href="features.html" class="page">Features</a></li>
  <li><a href="quickstart.html" class="page">Quickstart</a></li>
  <li><a href="api.html" class="active page">API</a></li>
  <li><a href="events.html" class="page">Events</a></li>
  <li><a href="backoffice.html" class="page">Back Office</a></li>
  <li><a href="recordmanagment.html" class="page">Record Management</a></li>
</ul>
</div>

</nav>
</div>

<div class="off-canvas-content" data-off-canvas-content>

<header class="site-header expanded row">
<div class="small-12 column">
<a href="#" class="off-canvas-toggle hide-for-medium" data-toggle="off-canvas-menu"><svg class="svg-icon svg-icon-menu" version="1.1" id="Menu" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"> <path class="svg-icon-menu-path" fill="#53CDEC" d="M16.4,9H3.6C3.048,9,3,9.447,3,10c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,9.447,16.952,9,16.4,9z M16.4,13
H3.6C3.048,13,3,13.447,3,14c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,13.447,16.952,13,16.4,13z M3.6,7H16.4
C16.952,7,17,6.553,17,6c0-0.553-0.048-1-0.6-1H3.6C3.048,5,3,5.447,3,6C3,6.553,3.048,7,3.6,7z"/></svg>
</a>
<div class="title-wrapper">
<div class="title-logo"></div>
<div class="title"><a href="index.html">Nio</a></div>
</div>
<!--
<a href="https://www.example.com" class="logo show-for-medium">logo</a>
-->
</div>
</header>

<div class="expanded row">

<div class="medium-3 large-2 show-for-medium column">
<nav class="site-nav">
<div class="nav-home">
<a href="index.html" >
<span class="home-icon">⌂</span>Nio
</a>
<div class="version-number">
0.1.0
</div>
</div>
<div class="nav-toc">
<ul>
  <li><a href="about.html" class="page">About Nio</a></li>
  <li><a href="archi.html" class="page">Architecture</a></li>
  <li><a href="features.html" class="page">Features</a></li>
  <li><a href="quickstart.html" class="page">Quickstart</a></li>
  <li><a href="api.html" class="active page">API</a></li>
  <li><a href="events.html" class="page">Events</a></li>
  <li><a href="backoffice.html" class="page">Back Office</a></li>
  <li><a href="recordmanagment.html" class="page">Record Management</a></li>
</ul>
</div>

</nav>
</div>

<div class="small-12 medium-9 large-10 column">
<section class="site-content">

<div class="page-header row">
<div class="medium-12 show-for-medium column">
<div class="nav-breadcrumbs">
<ul>
  <li><a href="index.html">Nio</a></li>
  <li>API</li>
</ul>
</div>
</div>
</div>

<div class="page-content row">
<div class="small-12 large-9 column" id="docs">
<h1><a href="#api" name="api" class="anchor"><span class="anchor-link"></span></a>API</h1>
<p><strong>Nio</strong> features are provided through it&rsquo;s API.</p>
<h2><a href="#swagger" name="swagger" class="anchor"><span class="anchor-link"></span></a>Swagger</h2>
<p>Swagger for API documentation may be found <a href="https://raw.githubusercontent.com/MAIF/nio/master/nio-server/public/swagger/swagger.json">here</a>.</p>
<h2><a href="#model" name="model" class="anchor"><span class="anchor-link"></span></a>Model</h2><div class="centered-img">
<img src="./img/nio-data-model.png"/></div>
<h3><a href="#tenant" name="tenant" class="anchor"><span class="anchor-link"></span></a>Tenant</h3>
<p>A <em>Tenant</em> is a dedicated environment that is totally isolated from other tenants.</p>
<h3><a href="#organisation" name="organisation" class="anchor"><span class="anchor-link"></span></a>Organisation</h3>
<p><em>Organisation</em> element represents an organisation (business organisation or any kind of organisation) that as a set of associated permissions.</p>
<p>Organisation example :</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;key&quot;: &quot;string&quot;,
  &quot;label&quot;: &quot;string&quot;,
  &quot;groups&quot;: [
    {
      &quot;key&quot;: &quot;string&quot;,
      &quot;label&quot;: &quot;string&quot;,
      &quot;permissions&quot;: [
        {
          &quot;key&quot;: &quot;string&quot;,
          &quot;label&quot;: &quot;string&quot;
        }
      ]
    }
  ],
  &quot;version&quot;: {
    &quot;status&quot;: &quot;string&quot;,
    &quot;num&quot;: 0,
    &quot;latest&quot;: true,
    &quot;neverReleased&quot;: true,
    &quot;lastUpdate&quot;: &quot;string&quot;
  }
}
</code></pre>
<h3><a href="#permission-group" name="permission-group" class="anchor"><span class="anchor-link"></span></a>Permission group</h3>
<p>A <em>Permission Group</em> is a set of permissions (this is actually a functionnal gathering).</p>
<h3><a href="#permission" name="permission" class="anchor"><span class="anchor-link"></span></a>Permission</h3>
<p>A <em>Permission</em> is an actual permission for a given authorisation (ex : &ldquo;I authorise CompanyX to send me promotional emails&rdquo;).</p>
<h3><a href="#user" name="user" class="anchor"><span class="anchor-link"></span></a>User</h3>
<p>A <em>User</em> is a user in the scope of your organisation. User&rsquo;s <strong>id</strong> is his <strong>id</strong> in your organisation.</p>
<pre class="prettyprint"><code class="language-json">{
  &quot;userId&quot;: &quot;string&quot;,
  &quot;orgKey&quot;: &quot;string&quot;,
  &quot;lastUpdate&quot;: &quot;string&quot;,
  &quot;doneBy&quot;: {
    &quot;userId&quot;: &quot;string&quot;,
    &quot;role&quot;: &quot;string&quot;
  },
  &quot;version&quot;: 0,
  &quot;groups&quot;: [
    {
      &quot;key&quot;: &quot;string&quot;,
      &quot;label&quot;: &quot;string&quot;,
      &quot;consents&quot;: [
        {
          &quot;key&quot;: &quot;string&quot;,
          &quot;label&quot;: &quot;string&quot;,
          &quot;checked&quot;: true
        }
      ]
    }
  ]
}
</code></pre>
<h3><a href="#consents" name="consents" class="anchor"><span class="anchor-link"></span></a>Consents</h3>
<p><em>Consent</em> element stands for the actual user consent for a given permission.</p>
<h2><a href="#versionning" name="versionning" class="anchor"><span class="anchor-link"></span></a>Versionning</h2>
<p><em>Permissions</em> and <em>Consents</em> are versionned in order to be able to handle changes in the permissions to be able to know at anytime which version of the permissions have been approuved by the user.</p>
<h2><a href="#typical-workflow" name="typical-workflow" class="anchor"><span class="anchor-link"></span></a>Typical workflow</h2>
<p>Here is a typical workflow of nios usage.</p>
<h3><a href="#init" name="init" class="anchor"><span class="anchor-link"></span></a>Init</h3>
<p>Create <code>dev</code> tenant :</p>
<pre class="prettyprint"><code class="language-shell">curl -X POST &quot;https://&lt;nio-url&gt;/api/tenants&quot; \
-H &#39;Opun-Client-Id: &lt;client-id&gt;&#39; \
-H &#39;Opun-Client-Secret: &lt;client-secret&gt;&#39; \
-H &#39;tenant-admin-secret:&lt;tenant-admin-id&gt;&#39; \
-H &#39;Content-Type: application/json&#39; \
-H &#39;Accept: application/json&#39; \
--include \
-d &#39;{&quot;key&quot;: &quot;dev&quot;,&quot;description&quot;: &quot;dev tenant&quot;}&#39;
</code></pre>
<p>Create organisation :</p>
<pre class="prettyprint"><code class="language-shell">curl -X POST \
  &quot;https://&lt;nio-url&gt;/api/dev/organisations&quot; \
  -H &#39;accept: application/json&#39; \
  -H &#39;content-type: application/json&#39; \
  -H &#39;Opun-Client-Id: &lt;client-id&gt;&#39; \
  -H &#39;Opun-Client-Secret: &lt;client-secret&gt;&#39; \
  -d &#39;{
    &quot;key&quot;: &quot;exampleorg&quot;,
    &quot;label&quot;: &quot;Example Organisation&quot;,
    &quot;version&quot;: {
        &quot;status&quot;: &quot;RELEASED&quot;,
        &quot;num&quot;: 1,
        &quot;latest&quot;: true
    },
    &quot;groups&quot;: [{
        &quot;key&quot;: &quot;groupexample&quot;,
        &quot;label&quot;: &quot;Group Example&quot;,
        &quot;permissions&quot;: [{
            &quot;key&quot;: &quot;premissionexample&quot;,
            &quot;label&quot;: &quot;Permission example&quot;
        }]
    }]
}&#39; \
--include
</code></pre>
<h3><a href="#consents-update" name="consents-update" class="anchor"><span class="anchor-link"></span></a>Consents update</h3>
<p>GET consents <code>template</code> for the given organisation :</p>
<pre class="prettyprint"><code class="language-shell">curl -X GET &quot;https://&lt;nio-url&gt;/api/dev/organisations/exampleorg/users/_template&quot; \
-H &#39;accept: application/json&#39; \
-H &#39;content-type: application/json&#39; \
-H &#39;Opun-Client-Id: &lt;client-id&gt;&#39; \
-H &#39;Opun-Client-Secret: &lt;client-secret&gt;&#39;
</code></pre>
<p>PUT filled <code>template</code> :</p>
<pre class="prettyprint"><code class="language-shell">curl -X PUT \
  &quot;https://&lt;nio-url&gt;/api/dev/organisations/exampleorg/users/&lt;user-id&quot; \
  -H &#39;accept: application/json&#39; \
  -H &#39;content-type: application/json&#39; \
  -H &#39;Opun-Client-Id: &lt;client-id&gt;&#39; \
  -H &#39;Opun-Client-Secret: &lt;client-secret&gt;&#39; \
  -d &#39;{
    // the filled template ...
  }&#39;
</code></pre>
<div class="nav-next">
<p><strong>Next:</strong> <a href="events.html">Events</a></p>
</div>
</div>
<div class="large-3 show-for-large column" data-sticky-container>
<nav class="sidebar sticky" data-sticky data-anchor="docs" data-sticky-on="large">
<div class="page-nav">
<div class="nav-title">On this page:</div>
<div class="nav-toc">
<ul>
  <li><a href="api.html#api" class="header">API</a>
  <ul>
    <li><a href="api.html#swagger" class="header">Swagger</a></li>
    <li><a href="api.html#model" class="header">Model</a></li>
    <li><a href="api.html#versionning" class="header">Versionning</a></li>
    <li><a href="api.html#typical-workflow" class="header">Typical workflow</a></li>
  </ul></li>
</ul>
</div>
</div>
</nav>
</div>
</div>

</section>
</div>

</div>

<footer class="site-footer">

<section class="site-footer-nav">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 medium-4 large-3 text-center column">
<div class="nav-links">
<ul>
<!-- <li><a href="https://www.example.com/products/">Products</a> -->
</ul>
</div>
</div>

</div>
</div>
</div>
</section>

<section class="site-footer-base">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 text-center large-9 column">

<!--
<div class="copyright">
<span class="text">&copy; 2018</span>
<a href="https://www.example.com" class="logo">logo</a>
</div>
-->
</div>

</div>
</div>
</div>
</section>
</footer>

</div>
</div>
</div>
</body>

<script type="text/javascript" src="lib/foundation/dist/foundation.min.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="js/magellan.js"></script>

<style type="text/css">@import "lib/prettify/prettify.css";</style>
<script type="text/javascript" src="lib/prettify/prettify.js"></script>
<script type="text/javascript" src="lib/prettify/lang-scala.js"></script>
<script type="text/javascript">jQuery(function(){window.prettyPrint && prettyPrint()});</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-112498312-1"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'UA-112498312-1');
</script>
</html>




